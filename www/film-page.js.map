{"version":3,"sources":["webpack:///./pages/film-page.jsx","webpack:///./widgets/list.jsx","webpack:///./widgets/loading.jsx"],"names":["_preact","__webpack_require__","_preact2","_list","FilmPage","meanwhile","this","props","route","swapi","show","h","FilmPageSync","fetchOne","params","id","film","fetchMultiple","characters","minimum","species","planets","vehicles","starships","AsyncComponent","displayName","_props2","className","title","opening_crawl","director","producer","release_date","List","urls","items","pageName","_loading2","default","Component","field","map","url","index","item","pending","length","extractID","find","text","linkProps","href","undefined","defaultProps","Loading"],"mappings":"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","file":"film-page.js","sourcesContent":["import { h, Component } from 'preact';\nimport { AsyncComponent } from 'relaks/preact';\nimport { List } from 'widgets/list';\nimport Loading from 'widgets/loading';\n\n/** @jsx h */\n\nclass FilmPage extends AsyncComponent {\n    static displayName = 'FilmPage';\n\n    /**\n     * Retrieve remote data and render the synchronize half of this component\n     *\n     * @param  {Meanwhile}  meanwhile\n     *\n     * @return {VNode}\n     */\n    async renderAsync(meanwhile) {\n        let { route, swapi } = this.props;\n        let props = {\n            route,\n        };\n        meanwhile.show(<FilmPageSync {...props} />);\n        props.film = await swapi.fetchOne(`/films/${route.params.id}/`);\n        meanwhile.show(<FilmPageSync {...props} />);\n        props.characters = await swapi.fetchMultiple(props.film.characters, { minimum: 5 });\n        meanwhile.show(<FilmPageSync {...props} />);\n        props.species = await swapi.fetchMultiple(props.film.species, { minimum: '60%' });\n        meanwhile.show(<FilmPageSync {...props} />);\n        props.planets = await swapi.fetchMultiple(props.film.planets);\n        meanwhile.show(<FilmPageSync {...props} />);\n        props.vehicles = await swapi.fetchMultiple(props.film.vehicles, { minimum: '60%' });\n        meanwhile.show(<FilmPageSync {...props} />);\n        props.starships = await swapi.fetchMultiple(props.film.starships, { minimum: '60%' });\n        return <FilmPageSync {...props} />;\n    }\n}\n\nclass FilmPageSync extends Component {\n    static displayName = 'FilmPageSync';\n\n    /**\n     * Render the component, making best effort using what props are given\n     *\n     * @return {VNode}\n     */\n    render() {\n        let { route, film, characters, species, planets, vehicles, starships } = this.props;\n        if (!film) {\n            return <Loading />;\n        }\n        return (\n            <div className=\"character-page\">\n                <h1>{film.title}</h1>\n                <p>{film.opening_crawl}</p>\n                <div>Director: {film.director}</div>\n                <div>Producer: {film.producer}</div>\n                <div>Release date: {film.release_date}</div>\n                <h2>Characters</h2>\n                <List urls={film.characters} items={characters} pageName=\"character-summary\" route={route} />\n                <h2>Species</h2>\n                <List urls={film.species} items={species} pageName=\"species-summary\" route={route} />\n                <h2>Planets</h2>\n                <List urls={film.planets} items={planets} pageName=\"planet-summary\" route={route} />\n                <h2>Vehicles</h2>\n                <List urls={film.vehicles} items={vehicles} pageName=\"vehicle-summary\" route={route} />\n                <h2>Starships</h2>\n                <List urls={film.starships} items={starships} pageName=\"starship-summary\" route={route} />\n            </div>\n        );\n    }\n}\n\nexport {\n    FilmPage as default,\n    FilmPage,\n    FilmPageSync,\n};\n","import { h, Component } from 'preact';\n\n/** @jsx h */\n\nfunction List(props) {\n    let { route, urls, items, field, pageName } = props;\n    if (urls) {\n        // accept single URL and object\n        if (typeof(urls) === 'string') {\n            urls = [ urls ];\n            items = [ items ];\n        }\n        // deal with holes in the data set\n        items = urls.map((url, index) => {\n            let item = (items) ? items[index] : null;\n            if (!item) {\n                item = { url, pending: true };\n            }\n            return item;\n        });\n    }\n    if (!items) {\n        return null;\n    }\n    if (items.length === 0) {\n        return <ul className=\"empty\"><li><span>none</span></li></ul>;\n    }\n    return (\n        <ul>\n        {\n            items.map((item) => {\n                let id = route.extractID(item.url);\n                let url = route.find(pageName, { id });\n                let text = item.pending ? '...' : item[field];\n                let linkProps = {\n                    href: url,\n                    className: (item.pending) ? 'pending' : undefined,\n                };\n                return <li><a {...linkProps}>{text}</a></li>;\n            })\n        }\n        </ul>\n    );\n}\n\nList.defaultProps = {\n    field: 'name'\n};\n\nList.displayName = 'List';\n\nexport {\n    List as default,\n    List\n};\n","import { h, Component } from 'preact';\n\n/** @jsx h */\n\nfunction Loading() {\n    return (\n        <div className=\"loading\">\n            <div>\n                <i className=\"fab fa-empire fa-spin\"/> Loading\n            </div>\n        </div>\n    );\n}\n\nLoading.displayName = 'Loading';\n\nexport {\n    Loading as default,\n    Loading\n};\n"],"sourceRoot":""}