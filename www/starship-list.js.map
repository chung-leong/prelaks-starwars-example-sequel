{"version":3,"sources":["webpack:///./pages/starship-list.jsx","webpack:///./widgets/list.jsx","webpack:///./widgets/loading.jsx"],"names":["_preact","__webpack_require__","_preact2","StarshipList","meanwhile","this","props","route","swapi","show","h","StarshipListSync","fetchList","starships","more","AsyncComponent","displayName","_props2","_loading2","default","listProps","items","pageName","_list2","Component","List","urls","field","map","url","index","item","pending","length","className","id","extractID","find","text","linkProps","href","undefined","defaultProps","Loading"],"mappings":"6RAAAA,EAAAC,EAAA,IACAC,EAAAD,EAAA,QACAA,EAAA,UACAA,EAAA,6DAIME,6PAUgBC,8FACSC,KAAKC,MAAtBC,UAAOC,UACTF,EAAQ,CACRC,SAEJH,EAAUK,MAAK,EAAAT,EAAAU,GAACC,EAAqBL,aACbE,EAAMI,UAAU,6BAAxCN,EAAMO,iBACNP,EAAMO,UAAUC,0BACT,EAAAd,EAAAU,GAACC,EAAqBL,8GAlBVS,kBAArBZ,EACKa,YAAc,mBAqBnBL,0MAQO,IAAAM,EACsBZ,KAAKC,MAA1BO,EADDI,EACCJ,UAAWN,EADZU,EACYV,MACjB,IAAKM,EACD,OAAO,EAAAb,EAAAU,GAACQ,EAAAC,QAAD,MAEX,IAAIC,EAAY,CACZC,MAAOR,EACPS,SAAU,mBACVf,SAEJ,OACI,EAAAP,EAAAU,GAAA,YACI,EAAAV,EAAAU,GAAA,wBACA,EAAAV,EAAAU,GAACa,EAAAJ,QAASC,WArBKI,aAAzBb,EACKK,YAAc,qBA2BLG,QAAhBhB,IACAA,iBACAQ,8HC3DJ,IAAAX,EAAAC,EAAA,IAIA,SAASwB,EAAKnB,GAAO,IACXC,EAAwCD,EAAxCC,MAAOmB,EAAiCpB,EAAjCoB,KAAML,EAA2Bf,EAA3Be,MAAOM,EAAoBrB,EAApBqB,MAAOL,EAAahB,EAAbgB,SAgBjC,OAfII,IAEqB,iBAAVA,IACPA,EAAO,CAAEA,GACTL,EAAQ,CAAEA,IAGdA,EAAQK,EAAKE,IAAI,SAACC,EAAKC,GACnB,IAAIC,EAAQV,EAASA,EAAMS,GAAS,KAIpC,OAHKC,IACDA,EAAO,CAAEF,MAAKG,SAAS,IAEpBD,KAGVV,EAGgB,IAAjBA,EAAMY,QACC,EAAAjC,EAAAU,GAAA,MAAIwB,UAAU,UAAQ,EAAAlC,EAAAU,GAAA,WAAI,EAAAV,EAAAU,GAAA,uBAGjC,EAAAV,EAAAU,GAAA,UAEIW,EAAMO,IAAI,SAACG,GACP,IAAII,EAAK5B,EAAM6B,UAAUL,EAAKF,KAC1BA,EAAMtB,EAAM8B,KAAKf,EAAU,CAAEa,OAC7BG,EAAOP,EAAKC,QAAU,MAAQD,EAAKJ,GACnCY,EAAY,CACZC,KAAMX,EACNK,UAAYH,EAAKC,QAAW,eAAYS,GAE5C,OAAO,EAAAzC,EAAAU,GAAA,WAAI,EAAAV,EAAAU,GAAA,IAAO6B,EAAYD,OAhB/B,KAuBfb,EAAKiB,aAAe,CAChBf,MAAO,QAGXF,EAAKT,YAAc,SAGPG,QAARM,IACAA,qHCrDJ,IAAAzB,EAAAC,EAAA,IAIA,SAAS0C,IACL,OACI,EAAA3C,EAAAU,GAAA,OAAKwB,UAAU,YACX,EAAAlC,EAAAU,GAAA,YACI,EAAAV,EAAAU,GAAA,KAAGwB,UAAU,0BADjB,aAOZS,EAAQ3B,YAAc,YAGPG,QAAXwB,IACAA","file":"starship-list.js","sourcesContent":["import { h, Component } from 'preact';\nimport { AsyncComponent } from 'relaks/preact';\nimport List from 'widgets/list';\nimport Loading from 'widgets/loading';\n\n/** @jsx h */\n\nclass StarshipList extends AsyncComponent {\n    static displayName = 'StarshipList';\n\n    /**\n     * Retrieve remote data and render the synchronize half of this component\n     *\n     * @param  {Meanwhile}  meanwhile\n     *\n     * @return {VNode}\n     */\n    async renderAsync(meanwhile) {\n        let { route, swapi } = this.props;\n        let props = {\n            route,\n        };\n        meanwhile.show(<StarshipListSync {...props} />);\n        props.starships = await swapi.fetchList('/starships/');\n        props.starships.more();\n        return <StarshipListSync {...props} />;\n    }\n}\n\nclass StarshipListSync extends Component {\n    static displayName = 'StarshipListSync';\n\n    /**\n     * Render the component, making best effort using what props are given\n     *\n     * @return {VNode}\n     */\n    render() {\n        let { starships, route } = this.props;\n        if (!starships) {\n            return <Loading />;\n        }\n        let listProps = {\n            items: starships,\n            pageName: 'starship-summary',\n            route,\n        };\n        return (\n            <div>\n                <h1>Starships</h1>\n                <List {...listProps} />\n            </div>\n        );\n    }\n}\n\nexport {\n    StarshipList as default,\n    StarshipList,\n    StarshipListSync\n};\n","import { h, Component } from 'preact';\n\n/** @jsx h */\n\nfunction List(props) {\n    let { route, urls, items, field, pageName } = props;\n    if (urls) {\n        // accept single URL and object\n        if (typeof(urls) === 'string') {\n            urls = [ urls ];\n            items = [ items ];\n        }\n        // deal with holes in the data set\n        items = urls.map((url, index) => {\n            let item = (items) ? items[index] : null;\n            if (!item) {\n                item = { url, pending: true };\n            }\n            return item;\n        });\n    }\n    if (!items) {\n        return null;\n    }\n    if (items.length === 0) {\n        return <ul className=\"empty\"><li><span>none</span></li></ul>;\n    }\n    return (\n        <ul>\n        {\n            items.map((item) => {\n                let id = route.extractID(item.url);\n                let url = route.find(pageName, { id });\n                let text = item.pending ? '...' : item[field];\n                let linkProps = {\n                    href: url,\n                    className: (item.pending) ? 'pending' : undefined,\n                };\n                return <li><a {...linkProps}>{text}</a></li>;\n            })\n        }\n        </ul>\n    );\n}\n\nList.defaultProps = {\n    field: 'name'\n};\n\nList.displayName = 'List';\n\nexport {\n    List as default,\n    List\n};\n","import { h, Component } from 'preact';\n\n/** @jsx h */\n\nfunction Loading() {\n    return (\n        <div className=\"loading\">\n            <div>\n                <i className=\"fab fa-empire fa-spin\"/> Loading\n            </div>\n        </div>\n    );\n}\n\nLoading.displayName = 'Loading';\n\nexport {\n    Loading as default,\n    Loading\n};\n"],"sourceRoot":""}